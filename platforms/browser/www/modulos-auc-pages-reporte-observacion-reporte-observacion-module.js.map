{"version":3,"sources":["webpack:///./src/app/modulos/auc/components/observacion-form/observacion-form.component.html","webpack:///./src/app/modulos/auc/components/observacion-form/observacion-form.component.scss","webpack:///./src/app/modulos/auc/components/observacion-form/observacion-form.component.ts","webpack:///./src/app/modulos/auc/components/observaciones-sync/observacion-sync.component.html","webpack:///./src/app/modulos/auc/components/observaciones-sync/observacion-sync.component.scss","webpack:///./src/app/modulos/auc/components/observaciones-sync/observacion-sync.component.ts","webpack:///./src/app/modulos/auc/entities/observacion.ts","webpack:///./src/app/modulos/auc/entities/tarjeta.ts","webpack:///./src/app/modulos/auc/pages/reporte-observacion/reporte-observacion.module.ts","webpack:///./src/app/modulos/auc/pages/reporte-observacion/reporte-observacion.page.html","webpack:///./src/app/modulos/auc/pages/reporte-observacion/reporte-observacion.page.scss","webpack:///./src/app/modulos/auc/pages/reporte-observacion/reporte-observacion.page.ts","webpack:///./src/app/modulos/auc/services/observacion.service.ts"],"names":[],"mappings":"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","file":"modulos-auc-pages-reporte-observacion-reporte-observacion-module.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"anterior()\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>{{tarjeta?.nombre}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button (click)=\\\"guardarInspeccion()\\\" [disabled]=\\\"!form.valid\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"save\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-segment (ionChange)=\\\"segmentChanged($event)\\\" value=\\\"observ\\\">\\n    <ion-segment-button value=\\\"observ\\\">\\n      <ion-label>Reporte</ion-label>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"detalle\\\" *ngIf=\\\"tarjeta?.usarNivelRiesgo || tarjeta?.usarCausaRaiz\\\">\\n      <ion-label>\\n        <ion-label>Detalle</ion-label>\\n      </ion-label>\\n    </ion-segment-button>\\n  </ion-segment>\\n\\n  <form [formGroup]=\\\"form\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n    <ion-card [style.display]=\\\"segments['observ'] ? 'block':'none'\\\">\\n      <ion-button color=\\\"primary\\\" fill=\\\"outline\\\" expand=\\\"block\\\" (click)=\\\"getPicture()\\\" *sTienePermiso=\\\"['ADO_POST_DOCSUP']\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"camera\\\"></ion-icon>\\n      </ion-button>\\n\\n      <ion-slides pager=\\\"true\\\">\\n        <ion-slide *ngFor=\\\"let img of imagenes\\\">\\n          <img [src]=\\\"img | safeBypass:'resourceUrl'\\\" />\\n        </ion-slide>\\n      </ion-slides>\\n\\n      <ion-item>\\n        <ion-label position=\\\"stacked\\\">Tipo de observacion*</ion-label>\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" formControlName=\\\"tipoObservacion\\\">\\n          <ion-select-option *ngFor=\\\"let to of tarjeta?.campos.tipo_observacion\\\" [value]=\\\"to.label\\\">{{to.label}}\\n          </ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-label position=\\\"stacked\\\">Descripción*</ion-label>\\n        <ion-textarea formControlName=\\\"descripcion\\\" maxlength=\\\"510\\\"></ion-textarea>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-label position=\\\"stacked\\\">Afecta:</ion-label>\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" formControlName=\\\"afecta\\\" multiple=\\\"true\\\">\\n          <ion-select-option *ngFor=\\\"let a of tarjeta?.campos.afecta\\\" [value]=\\\"to\\\">{{a.label}}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-label position=\\\"stacked\\\">Recomendación:</ion-label>\\n        <ion-textarea formControlName=\\\"recomendacion\\\" maxlength=\\\"510\\\"></ion-textarea>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-label position=\\\"stacked\\\">Área reportada*</ion-label>\\n        <!--<sm-autocomplete (completeMethod)=\\\"onSearchChange($event)\\\" fieldLabel=\\\"nombre\\\" field=\\\"nombre\\\" [options]=\\\"areasList\\\"></sm-autocomplete>-->\\n        <ion-select placeholder=\\\"Seleccione área\\\" formControlName=\\\"area\\\">\\n          <ion-select-option *ngFor=\\\"let area of areasList\\\" [value]=\\\"area\\\">{{area.nombre}}</ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n\\n      <ion-item>\\n        <ion-label position=\\\"stacked\\\">Implicación</ion-label>\\n        <sm-tree [nodes]=\\\"tarjeta?.implicacionList\\\" field=\\\"implicacionList\\\" label=\\\"nombre\\\" [expanded]=\\\"true\\\"></sm-tree>\\n      </ion-item>\\n\\n    </ion-card>\\n\\n    <ion-card [style.display]=\\\"segments['detalle'] ? 'block':'none'\\\" *ngIf=\\\"tarjeta?.usarNivelRiesgo || tarjeta?.usarCausaRaiz\\\">\\n      <ion-item *ngIf=\\\"tarjeta?.usarCausaRaiz\\\">\\n        <ion-label position=\\\"stacked\\\">Causa raíz:</ion-label>\\n        <sm-tree [nodes]=\\\"sistemaCausaRaiz?.causaRaizList\\\" field=\\\"causaRaizList\\\" label=\\\"nombre\\\" [expanded]=\\\"true\\\">\\n        </sm-tree>\\n      </ion-item>\\n\\n      <ion-item *ngIf=\\\"tarjeta?.usarNivelRiesgo\\\">\\n        <ion-label position=\\\"stacked\\\">Nivel de riesgo:</ion-label>\\n        <ion-select okText=\\\"Aceptar\\\" cancelText=\\\"Cancelar\\\" formControlName=\\\"nivelRiesgo\\\">\\n          <ion-select-option *ngFor=\\\"let nr of sistemaNivelRiesgo?.nivelRiesgoList\\\" [value]=\\\"nr\\\">{{nr.nombre}} - {{nr.descripcion}}\\n          </ion-select-option>\\n        </ion-select>\\n      </ion-item>\\n    </ion-card>\\n  </form>\\n</ion-content>\"","module.exports = \"sm-tree {\\n  position: relative;\\n  left: -1em;\\n  width: 100%; }\\n\\nsm-autocomplete {\\n  width: 100%;\\n  z-index: 10; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9tZWRpYS9EQVRBL2Rldi9zaWdlc3MvZnJvbnRlbmQvc2lnZXNzX2FwcC9zcmMvYXBwL21vZHVsb3MvYXVjL2NvbXBvbmVudHMvb2JzZXJ2YWNpb24tZm9ybS9vYnNlcnZhY2lvbi1mb3JtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWtCO0VBQ2xCLFVBQVU7RUFDVixXQUFXLEVBQUE7O0FBR2Y7RUFDSSxXQUFXO0VBQ1gsV0FBVyxFQUFBIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxvcy9hdWMvY29tcG9uZW50cy9vYnNlcnZhY2lvbi1mb3JtL29ic2VydmFjaW9uLWZvcm0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJzbS10cmVle1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBsZWZ0OiAtMWVtO1xuICAgIHdpZHRoOiAxMDAlO1xufVxuXG5zbS1hdXRvY29tcGxldGV7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgei1pbmRleDogMTA7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Validators, FormBuilder, FormGroup, FormControl } from '@angular/forms';\nimport { ModalController, AlertController } from '@ionic/angular';\nimport { Tarjeta } from '../../entities/tarjeta';\nimport { SistemaNivelRiesgo } from '../../../com/entities/sistema-nivel-riesgo';\nimport { SistemaCausaRaiz } from '../../../sec/entities/sistema-causa-raiz';\nimport { SistemaCausaRaizService } from '../../../sec/services/sistema-causa-raiz.service';\nimport { Area } from '../../../emp/entities/area';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { Observacion } from '../../entities/observacion';\nimport { ObservacionService } from '../../services/observacion.service';\nimport { DirectorioService } from '../../../ado/services/directorio.service';\nimport { MensajeUsuarioService } from '../../../com/services/mensaje-usuario.service'\nimport { OfflineService } from '../../../com/services/offline.service';\nimport { Util, asyncLocalStorage } from '../../../com/utils/util';\n\n@Component({\n  selector: 'app-observacion-form',\n  templateUrl: './observacion-form.component.html',\n  styleUrls: ['./observacion-form.component.scss'],\n  providers: [SistemaCausaRaizService, Camera, ObservacionService, DirectorioService]\n})\nexport class ObservacionFormComponent implements OnInit {\n\n  segments = { 'detalle': false, 'observ': true };\n  tarjeta: Tarjeta;\n  form: FormGroup;\n  sistemaNivelRiesgo: SistemaNivelRiesgo;\n  sistemaCausaRaiz: SistemaCausaRaiz;\n  areasList: Area[];\n  imagenes: any[] = [];\n\n  options: CameraOptions = {\n    quality: 75,\n    destinationType: this.camera.DestinationType.FILE_URI,\n    encodingType: this.camera.EncodingType.JPEG,\n    correctOrientation: true,\n    mediaType: this.camera.MediaType.PICTURE,\n    targetWidth: 960,\n    targetHeight: 960,\n  }\n\n  constructor(\n    public alertController: AlertController,\n    private mensajeUsuarioService: MensajeUsuarioService,\n    private directorioService: DirectorioService,\n    private observacionService: ObservacionService,\n    private camera: Camera,\n    private offlineService: OfflineService,\n    public fb: FormBuilder,\n    public modalController: ModalController,\n  ) {\n    this.form = fb.group({\n      id: null,\n      tipoObservacion: [null, Validators.required],\n      afecta: null,\n      descripcion: [null, Validators.required],\n      recomendacion: null,\n      nivelRiesgo: null,\n      causaRaiz: null,\n      area: [null, Validators.required]\n    });\n  }\n\n  ngOnInit() {\n    this.offlineService.queryArea().then(\n      resp => this.areasList = (<Area[]>resp['data'])\n    );\n    this.offlineService.querySistemaNivelRiesgo().then(\n      data => this.sistemaNivelRiesgo = (<SistemaNivelRiesgo>data['data'][0])\n    );\n    this.offlineService.querySistemaCausaRaiz().then(\n      data => this.sistemaCausaRaiz = (<SistemaCausaRaiz>data)\n    );\n\n    this.modalController.getTop().then(data => {\n      this.tarjeta = (<any>data).componentProps.value;\n      this.tarjeta.campos = JSON.parse(this.tarjeta.campos);\n    });\n  }\n\n  anterior() {\n    this.presentAlertaSalir();\n  }\n  \n  async presentAlertaSalir() {\n    const alert = await this.alertController.create({\n      header: '¿Desea salir?',\n      message: 'La observación no ha sido guardada, los datos serán descartados. ¿Confirma esta acción?',\n      buttons: [{\n        text: 'Si',\n        handler: () => {\n          this.modalController.dismiss();\n        }\n      }, {\n        text: 'No',\n        role: 'cancel',\n        cssClass: 'No'\n      }]\n    });\n    await alert.present();\n  }\n\n  getPicture() {\n    this.camera.getPicture(this.options).then(imageData => {\n      let imgUrl = (<any>window).Ionic.WebView.convertFileSrc(imageData);\n      this.imagenes.push(imgUrl);\n      this.imagenes = this.imagenes.slice();\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  buildList(field: string, tree: any[], list: any[]) {\n    tree.forEach(node => {\n      if (node[field] != null && node[field].length > 0) {\n        this.buildList(field, node[field], list);\n      }\n      if (node['selected'] == true) {\n        list.push({ id: node.id });\n      }\n    });\n  }\n\n  onSubmit() {\n  }\n\n  guardarInspeccion() {\n    let observacion = new Observacion();\n    observacion.tipoObservacion = this.form.value.tipoObservacion;\n    observacion.descripcion = this.form.value.descripcion;\n\n    let implicacionList = [];\n    this.buildList('implicacionList', this.tarjeta.implicacionList, implicacionList);\n    observacion.implicacionList = implicacionList;\n\n    observacion.area = this.form.value.area;\n    observacion.afecta = this.form.value.afecta;\n    observacion.recomendacion = this.form.value.recomendacion;\n\n    let causaRaizList = [];\n    this.buildList('causaRaizList', this.sistemaCausaRaiz.causaRaizList, causaRaizList);\n    observacion.causaRaizList = causaRaizList;\n\n    observacion.nivelRiesgo = this.form.value.nivelRiesgo;\n    observacion.tarjeta = new Tarjeta();\n    observacion.tarjeta.id = this.tarjeta.id;\n    observacion.tarjeta.nombre = this.tarjeta.nombre;\n    this.persistirObservacion(observacion).then(\n      resp => this.manageResponse(resp)\n    );\n  }\n\n  persistirObservacion(observacion: Observacion): Promise<any> {\n    if (this.offlineService.getOfflineMode()) {\n      return new Promise((resolve, reject) => {\n        observacion['imagenes'] = this.imagenes;\n        observacion.fechaObservacion = new Date();\n        observacion['hash'] = observacion.fechaObservacion.toISOString();\n        asyncLocalStorage.setItem(observacion['hash'], JSON.stringify(observacion));\n        asyncLocalStorage.getItem('observaciones').then(\n          data => {\n            let obserStore: string[] = data == null ? [] : data;\n            obserStore.push(observacion['hash']);\n            asyncLocalStorage.setItem('observaciones', JSON.stringify(obserStore));\n          }\n        );\n        resolve(observacion);\n      });\n    } else {\n      return this.observacionService.create(observacion).then(data => {\n        observacion.id = (<Observacion>data).id;\n        let cod = 1;\n        this.imagenes.forEach(url => {\n          Util.dataURLtoFile(url, 'img_' + cod + '_obs_' + observacion.id + '.jpeg').then(\n            file => this.directorioService.upload(file, null, 'AUC', observacion.id)\n          );\n          cod++;\n        });\n      });\n    }\n  }\n\n  manageResponse(observacion: Observacion) {\n    this.modalController.dismiss(observacion).then(\n      resp => this.mensajeUsuarioService.showMessage({\n        tipoMensaje: 'success',\n        mensaje: 'OBSERVACIÓN REALIZADA',\n        detalle: 'Se ha registrado correctamente la observación'\n      })\n    );\n  }\n\n  segmentChanged(event) {\n    for (var seg in this.segments) {\n      this.segments[seg] = false;\n      if (event.detail.value == seg)\n        this.segments[seg] = true;\n\n    }\n  }\n\n  // dataURLtoFile(dataurl: string, filename: string): File {\n  //   let arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n  //     bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n  //   while (n--) {\n  //     u8arr[n] = bstr.charCodeAt(n);\n  //   }\n  //   return new File([u8arr], filename, { type: mime });\n  // }\n\n}\n","module.exports = \"<ion-card *ngFor=\\\"let obs of obserList; let i = index\\\">\\n    <ion-item>\\n        <ion-button fill=\\\"clear\\\" slot=\\\"end\\\" (click)=\\\"presentAlertConfirm(obs, i)\\\" color=\\\"medium\\\">\\n            <ion-icon name=\\\"close\\\"></ion-icon>\\n        </ion-button>\\n        <ion-button fill=\\\"outline\\\" (click)=\\\"sincronizar(obs, i)\\\">\\n            {{obs.fechaObservacion | date:'dd/MM/yyyy HH:mm'}}\\n        </ion-button>\\n    </ion-item>\\n    <ion-card-header>\\n        <ion-label>{{obs.tarjeta.nombre}}</ion-label>\\n        <ion-card-subtitle>\\n            {{obs.area.nombre}}\\n        </ion-card-subtitle>\\n        <ion-card-subtitle>\\n            {{obs.tipoObservacion}}\\n        </ion-card-subtitle>\\n        <ion-card-subtitle>\\n            {{obs.descripcion}}\\n        </ion-card-subtitle>\\n    </ion-card-header>\\n</ion-card>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvYXVjL2NvbXBvbmVudHMvb2JzZXJ2YWNpb25lcy1zeW5jL29ic2VydmFjaW9uLXN5bmMuY29tcG9uZW50LnNjc3MifQ== */\"","import { Component, OnInit, Output, EventEmitter } from '@angular/core';\nimport { Observacion } from '../../entities/observacion';\nimport { asyncLocalStorage, Util } from '../../../com/utils/util';\nimport { MensajeUsuarioService } from '../../../com/services/mensaje-usuario.service';\nimport { DirectorioService } from '../../../ado/services/directorio.service';\nimport { AlertController } from '@ionic/angular';\nimport { ObservacionService } from '../../services/observacion.service';\n@Component({\n  selector: 'sm-observacionSync',\n  templateUrl: './observacion-sync.component.html',\n  styleUrls: ['./observacion-sync.component.scss'],\n  providers: [ObservacionService]\n})\nexport class ObservacionSyncComponent implements OnInit {\n\n  obserList: Observacion[];\n  @Output('onEvent') onEvent = new EventEmitter<any>();\n\n\n  constructor(\n    private msgService: MensajeUsuarioService,\n    private dirService: DirectorioService,\n    public alertController: AlertController,\n    private obserService: ObservacionService\n  ) {\n\n  }\n\n  ngOnInit() {\n    asyncLocalStorage.getItem('observaciones').then(resp => {\n      if (resp != null) {\n        this.onEvent.emit({ type: 'onLoad', count: resp.length });\n        this.obserList = [];\n        resp.forEach(inpKey => {\n          asyncLocalStorage.getItem(inpKey).then(\n            resp => {\n              let obser = <Observacion>resp;\n              obser.fechaObservacion = obser.fechaObservacion == null ? null : new Date(obser.fechaObservacion);\n              this.obserList.push(obser);\n              this.obserList = this.obserList.slice();\n            }\n          );\n        });\n      } else {\n        this.onEvent.emit({ type: 'onLoad', count: 0 });\n      }\n    });\n  }\n\n  adicionarObservacion(obser: Observacion): any {\n    if (this.obserList == null)\n      this.obserList = [];\n    this.obserList.push(obser);\n    this.obserList = this.obserList.slice();\n  }\n\n  borrarObservacion(observ: Observacion, indice: number, emitEvent?: boolean) {\n    let inspHash = observ['hash']\n    asyncLocalStorage.removeItem(inspHash);\n    this.obserList.splice(indice, 1);\n    this.obserList = this.obserList.slice();\n    if (emitEvent)\n      this.onEvent.emit({ type: 'onLocalRemove', count: this.obserList.length, inspeccion: observ });\n\n    asyncLocalStorage.getItem('observaciones').then(resp => {\n      if (resp.length <= 1) {\n        asyncLocalStorage.removeItem('observaciones');\n      } else {\n        for (let i = 0; i < resp.length; i++) {\n          if (resp[i] == inspHash) {\n            resp.splice(i, 1);\n            break;\n          }\n        }\n        asyncLocalStorage.setItem('observaciones', JSON.stringify(resp));\n      }\n    });\n  }\n\n\n\n  async presentAlertConfirm(obser: Observacion, index: number) {\n    const alert = await this.alertController.create({\n      header: '¿Eliminar observación?',\n      message: 'Esto borrará de su entorno local la observación y no podrá sincronizarla. ¿Confirma esta acción?',\n      buttons: [{\n        text: 'Si',\n        handler: () => {\n          this.borrarObservacion(obser, index, true);\n          this.msgService.showMessage({ tipoMensaje: 'info', mensaje: 'Observación eliminada de entorno local', detalle: '' });\n        }\n      }, {\n        text: 'No',\n        role: 'cancel',\n        cssClass: 'No'\n      }]\n    });\n    await alert.present();\n  }\n\n  sincronizar(obser: Observacion, indice: number) {\n    this.obserService.create(obser).then(\n      obsResp => {\n        if (obser['imagenes'] != null) {\n          for (let i = 0; i < obser['imagenes'].length; i++) {\n            let img = obser['imagenes'][i];\n            if (img != null)\n              Util.dataURLtoFile(img, 'img_' + i + '_obs_' + obsResp['id'] + '.jpeg').then(file =>\n                this.dirService.upload(file, null, 'AUC', obsResp['id'])\n              );\n          }\n        }\n\n        this.borrarObservacion(obser, indice);\n\n        this.msgService.showMessage({\n          tipoMensaje: 'success',\n          mensaje: 'Observación sincronizada',\n          detalle: 'La observación ha sido sincronizada correctamente'\n        });\n        this.onEvent.emit({ type: 'onSync', observacion: obsResp, count: this.obserList.length });\n      }\n    );\n  }\n}\n","\nimport { Tarjeta } from './tarjeta'\nimport { Implicacion } from './implicacion'\nimport { Area } from '../../emp/entities/area'\nimport { CausaRaiz } from '../../sec/entities/causa-raiz';\nimport { Usuario } from '../../emp/entities/usuario';\n\nexport class Observacion {\n  id: string;\n  tipoObservacion: string;\n  afecta: string[];\n  descripcion: string;\n  recomendacion: string;\n  nivelRiesgo: string;\n  fechaObservacion: Date;\n  aceptada: Boolean;\n  motivo: string;\n  fechaRespuesta: Date;\n  area: Area;\n  implicacionList: Implicacion[];\n  causaRaizList: CausaRaiz[];\n  causaRaizAprobadaList: CausaRaiz[];\n  tarjeta: Tarjeta;\n  usuarioReporta: Usuario;\n  usuarioRevisa: Usuario;\n}","\nimport { Implicacion } from './implicacion'\n\nexport class Tarjeta {\n  id: string;\n  codigo: string;\n  nombre: string;\n  descripcion: string;\n  campos: any;\n  implicacionList: Implicacion[];\n  usarNivelRiesgo:boolean;\n  usarCausaRaiz:boolean;\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ReporteObservacionPage } from './reporte-observacion.page';\nimport { ObservacionFormComponent } from '../../components/observacion-form/observacion-form.component';\nimport { TreeModule } from '../../../com/components/tree/tree.component'\nimport { ComunModule } from '../../../com/comun.module';\nimport { ObservacionSyncComponent } from '../../components/observaciones-sync/observacion-sync.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReporteObservacionPage\n  }\n];\n\n@NgModule({\n  imports: [\n    ComunModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    TreeModule,\n    RouterModule.forChild(routes)\n  ],\n  exports: [ComunModule],\n  entryComponents: [ObservacionFormComponent],\n  declarations: [ReporteObservacionPage, ObservacionFormComponent, ObservacionSyncComponent]\n})\nexport class ReporteObservacionPageModule { }\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"navegar('/app/home')\\\">\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"arrow-back\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>{{nombreAuc}}</ion-title>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n\\n</ion-header>\\n\\n<ion-content>\\n  <ion-segment (ionChange)=\\\"segmentChanged($event)\\\" value=\\\"tarjeta\\\">\\n    <ion-segment-button value=\\\"tarjeta\\\">\\n      <ion-label>Tarjetas</ion-label>\\n    </ion-segment-button>\\n    <ion-segment-button value=\\\"observ\\\">\\n      <ion-label>\\n        Sincronizar\\n        <ion-badge *ngIf=\\\"obsCount > 0\\\" color=\\\"warning\\\">{{obsCount}}</ion-badge>\\n      </ion-label>\\n    </ion-segment-button>\\n  </ion-segment>\\n\\n  <ion-spinner class=\\\"main-spinner\\\" name=\\\"dots\\\" *ngIf=\\\"loading == true\\\" color=\\\"primary\\\"></ion-spinner>\\n\\n  <sm-observacionSync [style.display]=\\\"segments['observ'] ? 'block':'none'\\\" #obserSyncComp (onEvent)=\\\"onEvent($event)\\\"></sm-observacionSync>\\n\\n  <div *ngIf=\\\"loading == false\\\" [style.display]=\\\"segments['tarjeta'] ? 'block':'none'\\\">\\n    <ion-card *ngFor=\\\"let tarjeta of tarjetaList\\\">\\n      <ion-item>\\n        <ion-label>{{tarjeta.nombre}}</ion-label>\\n        <ion-button fill=\\\"outline\\\" slot=\\\"end\\\" (click)=\\\"onTarjetaSelect(tarjeta)\\\" *sTienePermiso=\\\"['EMP_GET_AREA', 'SEC_GET_SCRDEF']\\\">Registrar</ion-button>\\n      </ion-item>\\n      <ion-card-content>\\n        <p>{{tarjeta.codigo}} </p>\\n        <p>{{tarjeta.descripcion}} </p>\\n      </ion-card-content>\\n    </ion-card>\\n  </div>\\n\\n\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsb3MvYXVjL3BhZ2VzL3JlcG9ydGUtb2JzZXJ2YWNpb24vcmVwb3J0ZS1vYnNlcnZhY2lvbi5wYWdlLnNjc3MifQ== */\"","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { Tarjeta } from '../../entities/tarjeta';\nimport { ObservacionFormComponent } from '../../components/observacion-form/observacion-form.component'\nimport { Router } from '@angular/router';\nimport { OfflineService } from '../../../com/services/offline.service';\nimport { Observacion } from '../../entities/observacion';\nimport { ObservacionSyncComponent } from '../../components/observaciones-sync/observacion-sync.component';\nimport { SesionService } from '../../../com/services/sesion.service';\n\n@Component({\n  selector: 'sm-reporteObservacion',\n  templateUrl: './reporte-observacion.page.html',\n  styleUrls: ['./reporte-observacion.page.scss']\n})\nexport class ReporteObservacionPage implements OnInit {\n\n  @ViewChild('obserSyncComp') obserSyncComp: ObservacionSyncComponent;\n  nombreAuc: string;\n  tarjetaList: Tarjeta[];\n  segments = { 'tarjeta': true, 'observ': false };\n  obsCount = 0;\n  loading: boolean = true;\n\n  constructor(\n    private sesionService: SesionService,\n    private offlineService: OfflineService,\n    public modalController: ModalController,\n    public router: Router\n  ) { }\n\n  ngOnInit() {\n    this.nombreAuc = this.sesionService.getConfigParam('NOMB_MOD_AUC');\n    this.offlineService.queryTarjetaObservacion()\n      .then(resp => {\n        this.tarjetaList = <Tarjeta[]>resp;\n        this.loading = false;\n      })\n      .catch(err => this.loading = null);\n  }\n\n  async onTarjetaSelect(tarjeta: Tarjeta) {\n    const modal = await this.modalController.create({\n      component: ObservacionFormComponent,\n      componentProps: { value: tarjeta },\n      cssClass: \"modal-fullscreen\"\n    });\n    modal.onDidDismiss().then(\n      resp => this.onModalDismiss(resp.data)\n    );\n    return await modal.present();\n  }\n\n  onModalDismiss(obser: Observacion) {\n    if (obser != null && obser.id == null) {\n      this.obsCount += 1;\n      this.obserSyncComp.adicionarObservacion(obser);\n    }\n  }\n  onEvent(event) {\n    this.obsCount = event.count;\n  }\n\n  navegar(url) {\n    this.router.navigate([url])\n  }\n\n  segmentChanged(event) {\n    for (var seg in this.segments) {\n      this.segments[seg] = false;\n      if (event.detail.value == seg)\n        this.segments[seg] = true;\n\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ServiceCRUD } from '../../com/services/service-crud.service'\nimport { Observacion } from '../entities/observacion';\n\n@Injectable()\nexport class ObservacionService extends ServiceCRUD<Observacion>{\n\n  getClassName(): string {\n    return \"ObservacionService\";\n  }\n}\n"],"sourceRoot":""}