<!--Programación-->
<ion-slides>
    <div style="width: 100%">
        <!--Fecha-->
        <ion-item>
            <ion-icon name="search" slot="start"></ion-icon>

            <ion-label position="stacked"> Desde </ion-label>
            <ion-datetime
                cancelText="Cancelar"
                doneText="Ok"
                max="2022"
                displayFormat="DD/MM/YYYY"
                picker-format="DD, MMMM, YYYY"
                monthNames="Enero, Febrero, Marzo, Abril, Mayo, Junio, Julio, Agosto, Septiembre, Octubre, Noviembre, Diciembre"
                (ionChange)="filtrarFechaDesde($event)"
            ></ion-datetime>
        </ion-item>
        <ion-item>
            <ion-icon name="search" slot="start"></ion-icon>
            <ion-label position="stacked"> Hasta </ion-label>
            <ion-datetime
                min="{{ filtFechaDesde | date: 'yyyy-MM-dd' }}"
                max="2022"
                cancelText="Cancelar"
                doneText="Ok"
                displayFormat="DD/MM/YYYY"
                picker-format="DD, MMMM, YYYY"
                monthNames="Enero, Febrero, Marzo, Abril, Mayo, Junio, Julio, Agosto, Septiembre, Octubre, Noviembre, Diciembre"
                (ionChange)="filtrarFechaHasta($event)"
            ></ion-datetime>
        </ion-item>
        <ion-item>
            <ion-button shape="round"  (click)="Reset()">
                {{ tituloButton }}
            </ion-button>
        </ion-item>
    </div>
</ion-slides>

<div *ngIf="loading == true">
    <ion-spinner class="main-spinner" name="dots" color="primary"></ion-spinner>
</div>
<div *ngIf="progCargada == false">
    <p style="color: #888; padding: 25px">
        No fue posible cargar la programación de inspecciones.
        <a *ngIf="progCargada == false" (click)="cargarProgramacion()">Reintentar</a>
    </p>
</div>

<ion-card *ngFor="let prog of programacionList">
    <ion-item>
        <ion-label>{{ prog.area.nombre }} </ion-label>
        <ion-button
            [color]="prog.numeroRealizadas == prog.numeroInspecciones ? 'secondary' : 'primary'"
            [disabled]="prog.numeroRealizadas == prog.numeroInspecciones"            
            slot="end"
            size="small"
            shape="round"
            (click)="onProgSelect(prog)"
            *sTienePermiso="['INP_POST_INP']"
        >
            {{ prog.numeroRealizadas == prog.numeroInspecciones ? 'Finalizado' : 'Realizar' }}
        </ion-button>        
    </ion-item>
    <ion-card-header>
        <ion-card-title>{{ prog.numeroRealizadas }}/{{ prog.numeroInspecciones }} </ion-card-title>
        <ion-card-subtitle
            >{{ prog.listaInspeccion.nombre }} <br />
            {{ prog.fecha | date: 'dd/MM/yyyy' }}
        </ion-card-subtitle>
    </ion-card-header>
    <ion-card-content *ngIf="prog.offlineDone > 0">
        <p>
            Pdte sincronizar:
            <ion-badge color="warning">{{ prog.offlineDone }}</ion-badge>
        </p>
    </ion-card-content>
</ion-card>

<ion-card *ngIf="programacionList?.length == 0" class="NoFound">
    <ion-icon name="search" slot="start"></ion-icon>
    <ion-label> No se encontraron registros </ion-label>
    <ion-icon name="alert"></ion-icon>
</ion-card>
